# encrypter
## Описание:
Простая программа которая шифрует/дешифрует выбранным алгоритмом текст переданный через стандартный поток ввода. Результат возвращает в стандартный поток вывода. Также доступно чтение и запись в файл, при использовании соответствующих опций. На данный момент реализованы алгоритмы:

- [Цезаря](#Алгоритм-Цезаря)
- [XTEA](#XTEA)

Состав алгоритмов может быть изменен в будующих обновлениях.
## Использование:
Общее использование:
```
encrypter {Имя алгоритма} {Режим работы} [опции]
```
- `Имя алгоритма` - Название требуемого алгоритма
- `Режим работы` - обычно это `enc` или `dec` (_шифрование_ или _дешифровнаие_ соответственно). Некоторые алгоритмы поддерживают больше режимов, например: генерация ключа `gen`; подробнее смотрите в справке по использованию конкретного алгоритма.

Если не используется операторы перенаправления потока `<` и `>`, то шифрует/дешифрует ввод с клавиатуры (_stdin_) и выводит результат в консоль (_stdout_). Некоторые алгоритмы имееют опции конфликутющие с `<` и `>`, поэтому использование их вместе возможно, но не рекомендуется. Также есть неопределенное поведение из за особеностей обработки текстовых/бинарных файлов стандартными потоками ввода/вывода в разных операционных системах. 

Вывод справок и прочих сообщений по умолчанию введется в stderr. Вы можете перенаправить поток с помощью оператора перенаправления потоков:
```
encrypter {Имя алгоритма} {Режим работы} [опции] 2> "/path/to/log.file"
```
Более релевантные примеры использования программы представлены ниже.

### Алгоритм Цезаря
___

Пример исопльзования программы в качестве _шифратора_ файла алгоритмом цезаря:
```
encrypter ceasar enc -k "key to encryption" -size 2048 -of \path\to\encrypted.txt -if \path\to\file.txt
```
- `-size` - указывает на размер шифруемого файла в байтах
- `-k` - строка-ключ для шифрования. Её значение может понадобится для дешифровки `encrypted.txt` в будующем.
- `-if` - путь до исходного файла, который необходимо зашифровать.
- `-of` - путь до результирующего файла, что будет содержать результат работы программы.

Пример использования программы в качестве _дешифратора_ файла алгоритмом цезаря:
```
encrypter ceasar dec -k "key to encryption" -size 2048 -of \path\to\decrypted.txt -if \path\to\encrypted.txt
```
Для успешного обратного преобразования, значения опций `-k` и `-size` должны повторять значения при шифровании файла `encrypted.txt`.

### XTEA
___

```
encrypter xtea {режим} [опции]: 
```
| Режимы | Описание |
|---|---|
| `gen` |  Сгенерировать ключ-файл для последующего шифрования. Опция - of обязательна
| `enc` | Зашифровать файл. Если опция -kf не указана, то будет сгенерирован  ключ-файл в той же директории что и -of. Использование без опций `-kf` и `-of` одновременно недопустимо |
| `dec` | Расшифровать файл. Если опция -kf не указана, то будет попытка поиска ключ файла в той же директории что и -if, с тем же именем, но с расширением `.key`. Использование без опций `-kf` и `-if` одновременно недопустимо |

| Опции|Описание|
|---|---|
| `-if "/path/to/plain.txt"` | Ввод данных из файла |
| `-of "/path/to/encoded.txt"` | Вывод результата работы в файл
| `-kf "/path/to/file.key"`    | Использование ключ-файла по заданному пути |
| `-nr 32` | Определить иное количество раундов петли Фестеля. По умолчанию количество равно `32` |
| `-size 2048`| Ограничивает количество байтов необходимых шифрования / дешифрования. Не должен превышать размер входного файла, иначе - неопределённое поведение. Обязательная опция в режимах enc / dec|

Для _генерации_ ключ-файла выполните:
```
 encrypter xtea gen -of "/path/to/encoded.txt"
```
Для _шифрования_:
```
encrypter xtea enc -size 2048 -kf "/path/to/file.key" -if "/path/to/plain.txt" -of "/path/to/encoded.txt"
```
Для _дешифрования_:
```
 encrypter xtea dec -size 2048 -kf "/path/to/file.key" -if "/path/to/encoded.txt" -of "/path/to/decoded.txt"
```
Для успешного обратного преобразования, важно чтобы значения `-size` и `-kf` совпадали с теми, которые были при _шифровании_. 

## Сборка
На данный момент достаточным для сборки будет Microsoft Visual Studio 2022: выбрать конфигурацию **Debug**, далее **Сборка** =>  **Собрать решение**. Исполняемый файл будет по пути `./x64/Debug/encrypter.exe`, примеры использования которого описаны выше.
## Соавторы

Отдельная благодарность тем, кто помог в разработке проекта:

- Fyodorochka: [GitHub](https://github.com/Fyodorochka)